		ORG 8000
8000:ED737381	LD(8173), SP
8004:2E1A	LD L, 1A
8006:CD0516	CALL 1605
8009:21BB5C	LD HL, 5CBB
800C:22515C	LD(5C51), HL
800F:21A183	LD HL, 83A1
8012:22BB5C	LD(5CBB), HL
		IF(false)
-     ld   HL, 0x0000     ; 3:10      init
-     ld  (putchar_yx),HL ; 3:16      init
		ELSE(true)
8015:212118	LD HL, 1821
8018:ED5B885C	LD DE, (5C88)
801C:B7		OR A
801D:ED52	SBC HL, DE
801F:7D		LD A, L
8020:87		ADD A, A
8021:3C		INC A
8022:87		ADD A, A
8023:87		ADD A, A
8024:2EFF	LD L, FF
8026:2C		INC L
8027:D605	SUB 05
8029:30FB	JR NC, 8026
802B:220C84	LD(840C), HL
		ENDIF
802E:2160EA	LD HL, EA60
8031:D9		EXX
8032:D5		PUSH DE
8033:EB		EX DE, HL
8034:2A655C	LD HL, (5C65)
8037:CD2282	CALL 8222
803A:EB		EX DE, HL
803B:D1		POP DE
803C:015A86	LD BC, 865A
803F:CDFC82	CALL 82FC
8042:D5		PUSH DE
8043:EB		EX DE, HL
8044:2A635C	LD HL, (5C63)
8047:CD2282	CALL 8222
804A:EB		EX DE, HL
804B:D1		POP DE
804C:012B86	LD BC, 862B
804F:CDFC82	CALL 82FC
8052:012286	LD BC, 8622
8055:CDFC82	CALL 82FC
8058:CD7A81	CALL 817A
805B:CDC182	CALL 82C1
805E:3E0D	LD A, 0D
8060:D7		RST 10
8061:D5		PUSH DE
8062:E5		PUSH HL
8063:11FF7F	LD DE, 7FFF
8066:D5		PUSH DE
8067:6B		LD L, E
8068:65		LD H, L
8069:E5		PUSH HL
806A:CD3982	CALL 8239
806D:3E3D	LD A, 3D
806F:D7		RST 10
8070:CDC581	CALL 81C5
8073:CD1A82	CALL 821A
8076:CDEF81	CALL 81EF
8079:3E0D	LD A, 0D
807B:D7		RST 10
807C:012286	LD BC, 8622
807F:CDFC82	CALL 82FC
8082:CD7A81	CALL 817A
8085:CDC182	CALL 82C1
8088:3E0D	LD A, 0D
808A:D7		RST 10
808B:D5		PUSH DE
808C:E5		PUSH HL
808D:11FF7F	LD DE, 7FFF
8090:62		LD H, D
8091:6B		LD L, E
8092:CDB482	CALL 82B4
8095:3E3D	LD A, 3D
8097:D7		RST 10
8098:CDB081	CALL 81B0
809B:CD1A82	CALL 821A
809E:CDEF81	CALL 81EF
80A1:3E0D	LD A, 0D
80A3:D7		RST 10
80A4:012286	LD BC, 8622
80A7:CDFC82	CALL 82FC
80AA:CD7A81	CALL 817A
80AD:CDC182	CALL 82C1
80B0:3E0D	LD A, 0D
80B2:D7		RST 10
80B3:011F86	LD BC, 861F
80B6:CDFC82	CALL 82FC
80B9:CD1282	CALL 8212
80BC:CD1A82	CALL 821A
80BF:CDEF81	CALL 81EF
80C2:3E0D	LD A, 0D
80C4:D7		RST 10
80C5:012286	LD BC, 8622
80C8:CDFC82	CALL 82FC
80CB:CD7A81	CALL 817A
80CE:CDC182	CALL 82C1
80D1:3E0D	LD A, 0D
80D3:D7		RST 10
80D4:011C86	LD BC, 861C
80D7:CDFC82	CALL 82FC
80DA:D5		PUSH DE
80DB:EB		EX DE, HL
80DC:218886	LD HL, 8688
80DF:CD9F81	CALL 819F
80E2:CD1A82	CALL 821A
80E5:CDEF81	CALL 81EF
80E8:3E0D	LD A, 0D
80EA:D7		RST 10
80EB:012286	LD BC, 8622
80EE:CDFC82	CALL 82FC
80F1:CD7A81	CALL 817A
80F4:CDC182	CALL 82C1
80F7:3E0D	LD A, 0D
80F9:D7		RST 10
80FA:CD0A82	CALL 820A
80FD:3E3D	LD A, 3D
80FF:D7		RST 10
8100:CD1A82	CALL 821A
8103:CDEF81	CALL 81EF
8106:3E0D	LD A, 0D
8108:D7		RST 10
8109:012286	LD BC, 8622
810C:CDFC82	CALL 82FC
810F:CD7A81	CALL 817A
8112:CDC182	CALL 82C1
8115:3E0D	LD A, 0D
8117:D7		RST 10
8118:CD0282	CALL 8202
811B:012286	LD BC, 8622
811E:CDFC82	CALL 82FC
8121:CD7A81	CALL 817A
8124:CDC182	CALL 82C1
8127:3E0D	LD A, 0D
8129:D7		RST 10
812A:D5		PUSH DE
812B:EB		EX DE, HL
812C:2A655C	LD HL, (5C65)
812F:CD2282	CALL 8222
8132:EB		EX DE, HL
8133:D1		POP DE
8134:015A86	LD BC, 865A
8137:CDFC82	CALL 82FC
813A:D5		PUSH DE
813B:EB		EX DE, HL
813C:2A635C	LD HL, (5C63)
813F:CD2282	CALL 8222
8142:EB		EX DE, HL
8143:D1		POP DE
8144:012B86	LD BC, 862B
8147:CDFC82	CALL 82FC
814A:012286	LD BC, 8622
814D:CDFC82	CALL 82FC
8150:CD7A81	CALL 817A
8153:CDC182	CALL 82C1
8156:3E0D	LD A, 0D
8158:D7		RST 10
8159:011486	LD BC, 8614
815C:CDFC82	CALL 82FC
815F:D5		PUSH DE
8160:EB		EX DE, HL
8161:2A7381	LD HL, (8173)
8164:B7		OR A
8165:ED72	SBC HL, SP
8167:CB3C	SRL H
8169:CB1D	RR L
816B:2B		DEC HL
816C:CDC182	CALL 82C1
816F:3E0D	LD A, 0D
8171:D7		RST 10
8172:		label Stop
8172:310000	LD SP, 0000
8175:215827	LD HL, 2758
8178:D9		EXX
8179:C9		RET
817A:		label _ZDEPTH
817A:EB		EX DE, HL
817B:E3		EX(SP), HL
817C:E5		PUSH HL
817D:2A655C	LD HL, (5C65)
8180:ED4B635C	LD BC, (5C63)
8184:AF		XOR A
8185:ED42	SBC HL, BC
		IF(true)
8187:3009	JR NC, 8192
8189:95		SUB L
818A:6F		LD L, A
818B:9C		SBC A, H
818C:95		SUB L
818D:67		LD H, A
818E:3E2D	LD A, 2D
8190:D7		RST 10
8191:AF		XOR A
8192:		label _ZDEPTH_D5
		ENDIF
8192:010510	LD BC, 1005
8195:29		ADD HL, HL
8196:8F		ADC A, A
8197:B9		CP C
8198:3802	JR C, 819C
819A:91		SUB C
819B:2C		INC L
819C:10F7	DJNZ 8195
819E:C9		RET
819F:		label _ZFETCH
819F:D5		PUSH DE
81A0:ED5B655C	LD DE, (5C65)
81A4:CDC033	CALL 33C0
81A7:ED53655C	LD(5C65), DE
81AB:E1		POP HL
81AC:C1		POP BC
81AD:D1		POP DE
81AE:C5		PUSH BC
81AF:C9		RET
81B0:		label _S_TO_Z
81B0:44		LD B, H
81B1:4D		LD C, L
81B2:E1		POP HL
81B3:E3		EX(SP), HL
81B4:EB		EX DE, HL
81B5:		label _SIGN_BC_TO_Z
81B5:78		LD A, B
81B6:87		ADD A, A
		IF(true)
81B7:		label _CF_BC_TO_Z
81B7:9F		SBC A, A
81B8:E5		PUSH HL
81B9:D5		PUSH DE
81BA:5F		LD E, A
81BB:51		LD D, C
81BC:48		LD C, B
81BD:AF		XOR A
81BE:47		LD B, A
81BF:CDBB2A	CALL 2ABB
81C2:D1		POP DE
		ELSE(false)
- _CF_BC_TO_Z:           ;[22:138]    _cf_bc>z
-     sbc   A, A          ; 1:4       _cf_bc>z   0x00 or 0xff
-     push HL             ; 1:11      _cf_bc>z
-     ld   HL,(0x5C65)    ; 3:16      _cf_bc>z   load STKEND
-     ld  (HL),0x00       ; 2:10      _cf_bc>z
-     inc  HL             ; 1:6       _cf_bc>z
-     ld  (HL), A         ; 1:7       _cf_bc>z
-     inc  HL             ; 1:6       _cf_bc>z
-     ld  (HL), C         ; 1:7       _cf_bc>z
-     inc  HL             ; 1:6       _cf_bc>z
-     ld  (HL), B         ; 1:7       _cf_bc>z
-     inc  HL             ; 1:6       _cf_bc>z
-     ld  (HL),0x00       ; 2:10      _cf_bc>z
-     inc  HL             ; 1:6       _cf_bc>z
-     ld  (0x5C65),HL     ; 3:16      _cf_bc>z   save STKEND+5
		ENDIF
81C3:E1		POP HL
81C4:C9		RET
81C5:		label _D_TO_Z
81C5:7A		LD A, D
81C6:B3		OR E
81C7:B4		OR H
81C8:B5		OR L
81C9:281A	JR Z, 81E5
81CB:3E7F	LD A, 7F
81CD:B2		OR D
81CE:F5		PUSH AF
81CF:FCED82	CALL M, 82ED
81D2:06A0	LD B, A0
81D4:FAE081	JP M, 81E0
81D7:05		DEC B
81D8:29		ADD HL, HL
81D9:CB13	RL E
81DB:CB12	RL D
81DD:F2D781	JP P, 81D7
81E0:F1		POP AF
81E1:A2		AND D
81E2:53		LD D, E
81E3:5F		LD E, A
81E4:78		LD A, B
81E5:		label _ZERO_TO_Z
81E5:45		LD B, L
81E6:4C		LD C, H
81E7:CDBB2A	CALL 2ABB
81EA:C1		POP BC
81EB:E1		POP HL
81EC:D1		POP DE
81ED:C5		PUSH BC
81EE:C9		RET
81EF:		label _ZDOT
81EF:D5		PUSH DE
81F0:E5		PUSH HL
81F1:CDBF35	CALL 35BF
81F4:E5		PUSH HL
81F5:CDE32D	CALL 2DE3
81F8:E1		POP HL
81F9:22655C	LD(5C65), HL
81FC:3E20	LD A, 20
81FE:D7		RST 10
81FF:E1		POP HL
8200:D1		POP DE
8201:C9		RET
8202:		label _ZDROP
8202:D5		PUSH DE
8203:E5		PUSH HL
8204:EF		RST 28
8205:02		DEFB of 1 bytes
8206:38		DEFB of 1 bytes
8207:E1		POP HL
8208:D1		POP DE
8209:C9		RET
820A:		label _ZSUB
820A:D5		PUSH DE
820B:E5		PUSH HL
820C:EF		RST 28
820D:03		DEFB of 1 bytes
820E:38		DEFB of 1 bytes
820F:E1		POP HL
8210:D1		POP DE
8211:C9		RET
8212:		label _ZMUL
8212:D5		PUSH DE
8213:E5		PUSH HL
		IF(true)
8214:EF		RST 28
8215:04		DEFB of 1 bytes
8216:38		DEFB of 1 bytes
		ELSE(false)
-     call 0x35bf         ; 3:17      _z*   call ZX ROM stk-pntrs, DE= stkend, HL = DE-5
-     ld  (0x5C65),HL     ; 3:16      _z*   save STKEND
-     call 0x35c2         ; 3:17      _z*   call ZX ROM            DE= HL    , HL = HL-5
-     call 0x30ca         ; 3:17      _z*   call ZX ROM fmul, adr_HL = adr_DE * adr_HL
		ENDIF
8217:E1		POP HL
8218:D1		POP DE
8219:C9		RET
821A:		label _ZDUP
821A:D5		PUSH DE
821B:E5		PUSH HL
821C:EF		RST 28
821D:31		DEFB of 1 bytes
821E:38		DEFB of 1 bytes
821F:E1		POP HL
8220:D1		POP DE
8221:C9		RET
8222:		label PRT_HEX_U16
8222:7C		LD A, H
8223:CD2782	CALL 8227
8226:7D		LD A, L
8227:		label PRT_HEX_A
8227:F5		PUSH AF
8228:1F		RRA
8229:1F		RRA
822A:1F		RRA
822B:1F		RRA
822C:CD3082	CALL 8230
822F:F1		POP AF
8230:		label PRT_HEX_NIBBLE
8230:F6F0	OR F0
8232:27		DAA
8233:C6A0	ADD A, A0
8235:CE40	ADC A, 40
8237:D7		RST 10
8238:C9		RET
8239:		label PRT_S32
8239:7A		LD A, D
823A:87		ADD A, A
823B:3006	JR NC, 8243
823D:3E2D	LD A, 2D
823F:D7		RST 10
8240:CDED82	CALL 82ED
8243:		label PRT_U32
8243:AF		XOR A
8244:DDE5	PUSH IX
8246:EB		EX DE, HL
8247:DD6B	LD IXL, E
8249:DD62	LD IXH, D
824B:110036	LD DE, 3600
824E:0165C4	LD BC, C465
8251:CD9782	CALL 8297
8254:161F	LD D, 1F
8256:010AFA	LD BC, FA0A
8259:CD9782	CALL 8297
825C:118069	LD DE, 6980
825F:0167FF	LD BC, FF67
8262:CD9782	CALL 8297
8265:11C0BD	LD DE, BDC0
8268:0EF0	LD C, F0
826A:CD9782	CALL 8297
826D:116079	LD DE, 7960
8270:0EFE	LD C, FE
8272:CD9782	CALL 8297
8275:11F0D8	LD DE, D8F0
8278:48		LD C, B
8279:CD9782	CALL 8297
827C:1118FC	LD DE, FC18
827F:CD9782	CALL 8297
8282:119CFF	LD DE, FF9C
8285:CD9782	CALL 8297
8288:1EF6	LD E, F6
828A:CD9782	CALL 8297
828D:DD7D	LD A, IXL
828F:DDE1	POP IX
8291:C1		POP BC
8292:E1		POP HL
8293:D1		POP DE
8294:C5		PUSH BC
8295:1817	JR 82AE
8297:		label BIN32_DEC
8297:DD19	ADD IX, DE
8299:ED4A	ADC HL, BC
829B:3C		INC A
829C:38F9	JR C, 8297
829E:08		EX AF, AF'
829F:DD7D	LD A, IXL
82A1:93		SUB E
82A2:DD6F	LD IXL, A
82A4:DD7C	LD A, IXH
82A6:9A		SBC A, D
82A7:DD67	LD IXH, A
82A9:ED42	SBC HL, BC
82AB:08		EX AF, AF'
82AC:3D		DEC A
82AD:C8		RET Z
82AE:		label BIN32_DEC_CHAR
82AE:F630	OR 30
82B0:D7		RST 10
82B1:3E30	LD A, 30
82B3:C9		RET
82B4:		label PRT_S16
82B4:7C		LD A, H
82B5:87		ADD A, A
82B6:3009	JR NC, 82C1
82B8:3E2D	LD A, 2D
82BA:D7		RST 10
82BB:AF		XOR A
82BC:95		SUB L
82BD:6F		LD L, A
82BE:9C		SBC A, H
82BF:95		SUB L
82C0:67		LD H, A
82C1:		label PRT_U16
82C1:AF		XOR A
82C2:01F0D8	LD BC, D8F0
82C5:CDE082	CALL 82E0
82C8:0118FC	LD BC, FC18
82CB:CDE082	CALL 82E0
82CE:019CFF	LD BC, FF9C
82D1:CDE082	CALL 82E0
82D4:0EF6	LD C, F6
82D6:CDE082	CALL 82E0
82D9:7D		LD A, L
82DA:E1		POP HL
82DB:E3		EX(SP), HL
82DC:EB		EX DE, HL
82DD:1808	JR 82E7
82DF:3C		INC A
82E0:		label BIN16_DEC
82E0:09		ADD HL, BC
82E1:38FC	JR C, 82DF
82E3:ED42	SBC HL, BC
82E5:B7		OR A
82E6:C8		RET Z
82E7:		label BIN16_DEC_CHAR
82E7:F630	OR 30
82E9:D7		RST 10
82EA:3E30	LD A, 30
82EC:C9		RET
82ED:		label NEGATE_32
82ED:AF		XOR A
82EE:4F		LD C, A
82EF:95		SUB L
82F0:6F		LD L, A
82F1:79		LD A, C
82F2:9C		SBC A, H
82F3:67		LD H, A
82F4:79		LD A, C
82F5:9B		SBC A, E
82F6:5F		LD E, A
82F7:79		LD A, C
82F8:9A		SBC A, D
82F9:57		LD D, A
82FA:C9		RET
82FB:D7		RST 10
82FC:		label PRINT_STRING_Z
82FC:0A		LD A, (BC)
82FD:03		INC BC
82FE:B7		OR A
82FF:C2FB82	JP NZ, 82FB
8302:C9		RET
MAX_X		EQU 0033
MAX_Y		EQU 0018
CURCHL		EQU 5C51
PRINT_OUT	EQU 5CBB
8303:		label set_ink
8303:212484	LD HL, 8424
8306:AE		XOR (HL)
8307:E607	AND 07
8309:AE		XOR (HL)
830A:1833	JR 833F
830C:		label set_paper
830C:212484	LD HL, 8424
830F:87		ADD A, A
8310:87		ADD A, A
8311:87		ADD A, A
8312:AE		XOR (HL)
8313:E638	AND 38
8315:AE		XOR (HL)
8316:1827	JR 833F
8318:		label set_flash
8318:1F		RRA
8319:212484	LD HL, 8424
831C:7E		LD A, (HL)
831D:8F		ADC A, A
831E:0F		RRCA
831F:181E	JR 833F
8321:		label set_bright
8321:212484	LD HL, 8424
8324:0F		RRCA
8325:0F		RRCA
8326:AE		XOR (HL)
8327:E640	AND 40
8329:AE		XOR (HL)
832A:1813	JR 833F
832C:		label set_inverse
832C:212484	LD HL, 8424
832F:7E		LD A, (HL)
8330:E638	AND 38
8332:87		ADD A, A
8333:87		ADD A, A
8334:AE		XOR (HL)
8335:E6F8	AND F8
8337:AE		XOR (HL)
8338:07		RLCA
8339:07		RLCA
833A:07		RLCA
833B:AE		XOR (HL)
833C:E63F	AND 3F
833E:AE		XOR (HL)
833F:		label set_attr
833F:77		LD (HL), A
8340:		label clean_set_0
8340:AF		XOR A
8341:		label clean_set_A
8341:32A383	LD(83A3), A
8344:E1		POP HL
8345:C9		RET
8346:		label set_over
8346:18F8	JR 8340
8348:		label set_at
8348:320D84	LD(840D), A
834B:ED44	NEG
834D:C618	ADD A, 18
834F:32895C	LD(5C89), A
8352:3EB2	LD A, B2
8354:18EB	JR 8341
8356:		label set_at_x
8356:320C84	LD(840C), A
8359:18E5	JR 8340
		IF(false)
-     jr   print_comma    ; 2:12      putchar   0x06
-     jr   print_edit     ; 2:12      putchar   0x07
-     jr   cursor_left    ; 2:12      putchar   0x08
-     jr   cursor_right   ; 2:12      putchar   0x09
-     jr   cursor_down    ; 2:12      putchar   0x0A
-     jr   cursor_up      ; 2:12      putchar   0x0B
-     jr   delete         ; 2:12      putchar   0x0C
-     jr   enter          ; 2:12      putchar   0x0D
-     jr   not_used       ; 2:12      putchar   0x0E
-     jr   not_used       ; 2:12      putchar   0x0F    
		ENDIF
835B:		label tab_spec
835B:18A6	JR 8303
835D:18AD	JR 830C
835F:18B7	JR 8318
8361:18BE	JR 8321
8363:18C7	JR 832C
8365:18DF	JR 8346
8367:18DF	JR 8348
8369:		label set_tab
8369:2A0C84	LD HL, (840C)
836C:D633	SUB 33
836E:30FC	JR NC, 836C
8370:C633	ADD A, 33
8372:BD		CP L
8373:DC7884	CALL C, 8478
8376:		label set_tab_A
8376:6F		LD L, A
8377:220C84	LD(840C), HL
837A:18C4	JR 8340
837C:		label cursor_left
837C:2A0C84	LD HL, (840C)
837F:2C		INC L
8380:2D		DEC L
8381:2B		DEC HL
8382:2002	JR NZ, 8386
8384:2E32	LD L, 32
8386:1810	JR 8398
8388:		label print_comma
8388:2A0C84	LD HL, (840C)
838B:3E11	LD A, 11
838D:BD		CP L
838E:30E6	JR NC, 8376
8390:87		ADD A, A
8391:BD		CP L
8392:30E2	JR NC, 8376
8394:AF		XOR A
8395:		label enter
8395:CC7884	CALL Z, 8478
8398:		label enter_exit
8398:220C84	LD(840C), HL
839B:E1		POP HL
839C:C9		RET
839D:		label print_edit
839D:		label cursor_right
839D:		label cursor_down
839D:		label cursor_up
839D:		label delete
839D:		label not_used
839D:		label print_question
839D:3E3F	LD A, 3F
839F:185C	JR 83FD
83A1:		label putchar
83A1:E5		PUSH HL
self_jmp	EQU 83A3
83A2:1800	JR 83A4
83A4:		label jump_from
83A4:FEA5	CP A5
83A6:3025	JR NC, 83CD
83A8:FE20	CP 20
83AA:3051	JR NC, 83FD
83AC:FE06	CP 06
83AE:28D8	JR Z, 8388
83B0:FE08	CP 08
83B2:28C8	JR Z, 837C
83B4:FE09	CP 09
83B6:CA6984	JP Z, 8469
83B9:FE0D	CP 0D
83BB:28D8	JR Z, 8395
83BD:D610	SUB 10
83BF:38DC	JR C, 839D
83C1:FE08	CP 08
83C3:30D8	JR NC, 839D
83C5:		label draw_spec
83C5:87		ADD A, A
83C6:D649	SUB 49
83C8:32A383	LD(83A3), A
83CB:		label draw_spec_exit
83CB:E1		POP HL
83CC:C9		RET
83CD:		label print_token
83CD:EB		EX DE, HL
83CE:119500	LD DE, 0095
83D1:D6A5	SUB A5
83D3:F5		PUSH AF
83D4:CD410C	CALL 0C41
83D7:EB		EX DE, HL
83D8:3E20	LD A, 20
83DA:FDCB0146	BIT 0, (IY+01)
83DE:CCFC83	CALL Z, 83FC
83E1:		label token_loop
83E1:7E		LD A, (HL)
83E2:E67F	AND 7F
83E4:CDFC83	CALL 83FC
83E7:7E		LD A, (HL)
83E8:23		INC HL
83E9:87		ADD A, A
83EA:30F5	JR NC, 83E1
83EC:E1		POP HL
83ED:FE48	CP 48
83EF:2804	JR Z, 83F5
83F1:FE82	CP 82
83F3:38D6	JR C, 83CB
83F5:7C		LD A, H
83F6:FE03	CP 03
83F8:3E20	LD A, 20
83FA:D8		RET C
83FB:E1		POP HL
83FC:		label print_char
83FC:E5		PUSH HL
83FD:		label print_char_HL
83FD:D9		EXX
83FE:D5		PUSH DE
83FF:C5		PUSH BC
8400:E5		PUSH HL
8401:0180FF	LD BC, FF80
8404:87		ADD A, A
8405:6F		LD L, A
8406:2600	LD H, 00
8408:29		ADD HL, HL
8409:09		ADD HL, BC
840A:D9		EXX
putchar_yx	EQU 840C
putchar_y	EQU 840D
840B:110000	LD DE, 0000
840E:7B		LD A, E
840F:87		ADD A, A
8410:87		ADD A, A
8411:83		ADD A, E
8412:47		LD B, A
8413:AA		XOR D
8414:E6F8	AND F8
8416:AA		XOR D
8417:0F		RRCA
8418:0F		RRCA
8419:0F		RRCA
841A:6F		LD L, A
841B:7A		LD A, D
841C:F6C7	OR C7
841E:1F		RRA
841F:0F		RRCA
8420:3F		CCF
8421:1F		RRA
8422:67		LD H, A
self_attr	EQU 8424
8423:3638	LD (HL), 38
8425:7A		LD A, D
8426:E618	AND 18
8428:F640	OR 40
842A:67		LD H, A
842B:78		LD A, B
842C:E607	AND 07
842E:2F		CPL
842F:C609	ADD A, 09
8431:47		LD B, A
8432:D9		EXX
8433:4F		LD C, A
8434:D9		EXX
8435:EB		EX DE, HL
8436:21F000	LD HL, 00F0
8439:29		ADD HL, HL
843A:10FD	DJNZ 8439
843C:EB		EX DE, HL
843D:0E04	LD C, 04
843F:		label putchar_c
843F:D9		EXX
8440:7E		LD A, (HL)
8441:23		INC HL
8442:41		LD B, C
8443:07		RLCA
8444:10FD	DJNZ 8443
8446:47		LD B, A
8447:D9		EXX
8448:0602	LD B, 02
844A:		label putchar_b
844A:AE		XOR (HL)
844B:A2		AND D
844C:AE		XOR (HL)
844D:77		LD (HL), A
844E:D9		EXX
844F:78		LD A, B
8450:D9		EXX
8451:2C		INC L
8452:AE		XOR (HL)
8453:A3		AND E
8454:AE		XOR (HL)
8455:77		LD (HL), A
8456:2D		DEC L
8457:24		INC H
8458:D9		EXX
8459:78		LD A, B
845A:07		RLCA
845B:07		RLCA
845C:07		RLCA
845D:07		RLCA
845E:47		LD B, A
845F:D9		EXX
8460:10E8	DJNZ 844A
8462:0D		DEC C
8463:20DA	JR NZ, 843F
8465:E1		POP HL
8466:C1		POP BC
8467:D1		POP DE
8468:D9		EXX
8469:		label next_cursor
8469:2A0C84	LD HL, (840C)
846C:		label next_cursor_HL
846C:2C		INC L
846D:7D		LD A, L
846E:D633	SUB 33
8470:D47884	CALL NC, 8478
8473:		label next_exit
8473:220C84	LD(840C), HL
8476:		label exit_hl
8476:E1		POP HL
8477:C9		RET
8478:		label next_line
8478:F5		PUSH AF
8479:21885C	LD HL, 5C88
847C:3601	LD (HL), 01
847E:3E09	LD A, 09
8480:E5		PUSH HL
8481:CDF409	CALL 09F4
8484:21A183	LD HL, 83A1
8487:22BB5C	LD(5CBB), HL
848A:E1		POP HL
848B:3E18	LD A, 18
848D:2C		INC L
848E:96		SUB (HL)
848F:67		LD H, A
8490:2E00	LD L, 00
8492:F1		POP AF
8493:C9		RET
FONT_ADR	EQU 8414
8494:		label FONT_5x8
8494:00000000	DEFB of 4 bytes
8498:02222020	DEFB of 4 bytes
849C:05500000	DEFB of 4 bytes
84A0:005F5F50	DEFB of 4 bytes
84A4:02763720	DEFB of 4 bytes
84A8:0CD24B30	DEFB of 4 bytes
84AC:00EA5AD0	DEFB of 4 bytes
84B0:03120000	DEFB of 4 bytes
84B4:02444420	DEFB of 4 bytes
84B8:04222240	DEFB of 4 bytes
84BC:000A4A00	DEFB of 4 bytes
84C0:0004E400	DEFB of 4 bytes
84C4:00000224	DEFB of 4 bytes
84C8:0000E000	DEFB of 4 bytes
84CC:00000040	DEFB of 4 bytes
84D0:00124800	DEFB of 4 bytes
84D4:069BD960	DEFB of 4 bytes
84D8:02622270	DEFB of 4 bytes
84DC:069168F0	DEFB of 4 bytes
84E0:06921960	DEFB of 4 bytes
84E4:026AF220	DEFB of 4 bytes
84E8:0F8E1960	DEFB of 4 bytes
84EC:068E9960	DEFB of 4 bytes
84F0:0F124440	DEFB of 4 bytes
84F4:06969960	DEFB of 4 bytes
84F8:06997160	DEFB of 4 bytes
84FC:00020200	DEFB of 4 bytes
8500:00020240	DEFB of 4 bytes
8504:00124210	DEFB of 4 bytes
8508:00070700	DEFB of 4 bytes
850C:00421240	DEFB of 4 bytes
8510:0E124040	DEFB of 4 bytes
8514:006FB860	DEFB of 4 bytes
8518:0699F990	DEFB of 4 bytes
851C:0E9E99E0	DEFB of 4 bytes
8520:06988960	DEFB of 4 bytes
8524:0E9999E0	DEFB of 4 bytes
8528:0F8E88F0	DEFB of 4 bytes
852C:0F8E8880	DEFB of 4 bytes
8530:0698B970	DEFB of 4 bytes
8534:099F9990	DEFB of 4 bytes
8538:07222270	DEFB of 4 bytes
853C:07111960	DEFB of 4 bytes
8540:09ACA990	DEFB of 4 bytes
8544:088888F0	DEFB of 4 bytes
8548:09F99990	DEFB of 4 bytes
854C:09DB9990	DEFB of 4 bytes
8550:06999960	DEFB of 4 bytes
8554:0E99E880	DEFB of 4 bytes
8558:06999A50	DEFB of 4 bytes
855C:0E99E990	DEFB of 4 bytes
8560:078611E0	DEFB of 4 bytes
8564:0F222220	DEFB of 4 bytes
8568:09999960	DEFB of 4 bytes
856C:09999520	DEFB of 4 bytes
8570:09999F90	DEFB of 4 bytes
8574:09969990	DEFB of 4 bytes
8578:09952220	DEFB of 4 bytes
857C:0F1248F0	DEFB of 4 bytes
8580:07444470	DEFB of 4 bytes
8584:00842100	DEFB of 4 bytes
8588:0E2222E0	DEFB of 4 bytes
858C:02500000	DEFB of 4 bytes
8590:000000F0	DEFB of 4 bytes
8594:034E44F0	DEFB of 4 bytes
8598:00617970	DEFB of 4 bytes
859C:08E999E0	DEFB of 4 bytes
85A0:00698960	DEFB of 4 bytes
85A4:01799970	DEFB of 4 bytes
85A8:0069F870	DEFB of 4 bytes
85AC:34E44440	DEFB of 4 bytes
85B0:00799716	DEFB of 4 bytes
85B4:08E99990	DEFB of 4 bytes
85B8:20622270	DEFB of 4 bytes
85BC:10311196	DEFB of 4 bytes
85C0:089ACA90	DEFB of 4 bytes
85C4:0C4444E0	DEFB of 4 bytes
85C8:00CBBB90	DEFB of 4 bytes
85CC:00AD9990	DEFB of 4 bytes
85D0:00699960	DEFB of 4 bytes
85D4:00E999E8	DEFB of 4 bytes
85D8:00799971	DEFB of 4 bytes
85DC:00AD8880	DEFB of 4 bytes
85E0:007861E0	DEFB of 4 bytes
85E4:04E44430	DEFB of 4 bytes
85E8:00999960	DEFB of 4 bytes
85EC:00999520	DEFB of 4 bytes
85F0:00999F90	DEFB of 4 bytes
85F4:00996990	DEFB of 4 bytes
85F8:00999716	DEFB of 4 bytes
85FC:00F248F0	DEFB of 4 bytes
8600:12242210	DEFB of 4 bytes
8604:44444440	DEFB of 4 bytes
8608:84424480	DEFB of 4 bytes
860C:05A00000	DEFB of 4 bytes
8610:069BB960	DEFB of 4 bytes
8614:		label STRING_SECTION
8614:		label string115
8614:44657074	DEFB of 8 bytes
8618:683A2000
size115		EQU 0008
string114	EQU 8622
size114		EQU 0009
string113	EQU 862B
size113		EQU 002F
string112	EQU 865A
size112		EQU 002E
string111	EQU 8622
size111		EQU 0009
string110	EQU 8622
size110		EQU 0009
string109	EQU 8622
size109		EQU 0009
861C:		label string108
861C:2D0D00	DEFB of 3 bytes
size108		EQU 0003
string107	EQU 8622
size107		EQU 0009
861F:		label string106
861F:2A0D00	DEFB of 3 bytes
size106		EQU 0003
string105	EQU 8622
size105		EQU 0009
string104	EQU 8622
size104		EQU 0009
8622:		label string103
8622:5A446570	DEFB of 9 bytes
8626:74683A20
862A:00
size103		EQU 0009
862B:		label string102
862B:203D2053	DEFB of 47 bytes
862F:544B424F
8633:543A4164
8637:64722E20
863B:6F662062
863F:6F74746F
8643:6D206F66
8647:2063616C
864B:63756C61
864F:746F7220
8653:73746163
8657:6B0D00
size102		EQU 002F
865A:		label string101
865A:203D2053	DEFB of 46 bytes
865E:544B454E
8662:443A4164
8666:64726573
866A:73206F66
866E:20746F70
8672:206F6620
8676:63616C63
867A:756C6174
867E:6F722073
8682:7461636B
8686:0D00
size101		EQU 002E
8688:		label VARIABLE_SECTION
8688:		label zvar1
8688:AE		DEFB of 1 bytes
8689:7F		DEFB of 1 bytes
868A:FDFFFE	DEFB of 3 bytes
		ORG 8000
8000:ED737381	LD(8173), SP
8004:2E1A	LD L, 1A
8006:CD0516	CALL 1605
8009:21BB5C	LD HL, 5CBB
800C:22515C	LD(5C51), HL
800F:21A183	LD HL, 83A1
8012:22BB5C	LD(5CBB), HL
		IF(false)
-     ld   HL, 0x0000     ; 3:10      init
-     ld  (putchar_yx),HL ; 3:16      init
		ELSE(true)
8015:212118	LD HL, 1821
8018:ED5B885C	LD DE, (5C88)
801C:B7		OR A
801D:ED52	SBC HL, DE
801F:7D		LD A, L
8020:87		ADD A, A
8021:3C		INC A
8022:87		ADD A, A
8023:87		ADD A, A
8024:2EFF	LD L, FF
8026:2C		INC L
8027:D605	SUB 05
8029:30FB	JR NC, 8026
802B:220C84	LD(840C), HL
		ENDIF
802E:2160EA	LD HL, EA60
8031:D9		EXX
8032:D5		PUSH DE
8033:EB		EX DE, HL
8034:2A655C	LD HL, (5C65)
8037:CD2282	CALL 8222
803A:EB		EX DE, HL
803B:D1		POP DE
803C:015A86	LD BC, 865A
803F:CDFC82	CALL 82FC
8042:D5		PUSH DE
8043:EB		EX DE, HL
8044:2A635C	LD HL, (5C63)
8047:CD2282	CALL 8222
804A:EB		EX DE, HL
804B:D1		POP DE
804C:012B86	LD BC, 862B
804F:CDFC82	CALL 82FC
8052:012286	LD BC, 8622
8055:CDFC82	CALL 82FC
8058:CD7A81	CALL 817A
805B:CDC182	CALL 82C1
805E:3E0D	LD A, 0D
8060:D7		RST 10
8061:D5		PUSH DE
8062:E5		PUSH HL
8063:11FF7F	LD DE, 7FFF
8066:D5		PUSH DE
8067:6B		LD L, E
8068:65		LD H, L
8069:E5		PUSH HL
806A:CD3982	CALL 8239
806D:3E3D	LD A, 3D
806F:D7		RST 10
8070:CDC581	CALL 81C5
8073:CD1A82	CALL 821A
8076:CDEF81	CALL 81EF
8079:3E0D	LD A, 0D
807B:D7		RST 10
807C:012286	LD BC, 8622
807F:CDFC82	CALL 82FC
8082:CD7A81	CALL 817A
8085:CDC182	CALL 82C1
8088:3E0D	LD A, 0D
808A:D7		RST 10
808B:D5		PUSH DE
808C:E5		PUSH HL
808D:11FF7F	LD DE, 7FFF
8090:62		LD H, D
8091:6B		LD L, E
8092:CDB482	CALL 82B4
8095:3E3D	LD A, 3D
8097:D7		RST 10
8098:CDB081	CALL 81B0
809B:CD1A82	CALL 821A
809E:CDEF81	CALL 81EF
80A1:3E0D	LD A, 0D
80A3:D7		RST 10
80A4:012286	LD BC, 8622
80A7:CDFC82	CALL 82FC
80AA:CD7A81	CALL 817A
80AD:CDC182	CALL 82C1
80B0:3E0D	LD A, 0D
80B2:D7		RST 10
80B3:011F86	LD BC, 861F
80B6:CDFC82	CALL 82FC
80B9:CD1282	CALL 8212
80BC:CD1A82	CALL 821A
80BF:CDEF81	CALL 81EF
80C2:3E0D	LD A, 0D
80C4:D7		RST 10
80C5:012286	LD BC, 8622
80C8:CDFC82	CALL 82FC
80CB:CD7A81	CALL 817A
80CE:CDC182	CALL 82C1
80D1:3E0D	LD A, 0D
80D3:D7		RST 10
80D4:011C86	LD BC, 861C
80D7:CDFC82	CALL 82FC
80DA:D5		PUSH DE
80DB:EB		EX DE, HL
80DC:218886	LD HL, 8688
80DF:CD9F81	CALL 819F
80E2:CD1A82	CALL 821A
80E5:CDEF81	CALL 81EF
80E8:3E0D	LD A, 0D
80EA:D7		RST 10
80EB:012286	LD BC, 8622
80EE:CDFC82	CALL 82FC
80F1:CD7A81	CALL 817A
80F4:CDC182	CALL 82C1
80F7:3E0D	LD A, 0D
80F9:D7		RST 10
80FA:CD0A82	CALL 820A
80FD:3E3D	LD A, 3D
80FF:D7		RST 10
8100:CD1A82	CALL 821A
8103:CDEF81	CALL 81EF
8106:3E0D	LD A, 0D
8108:D7		RST 10
8109:012286	LD BC, 8622
810C:CDFC82	CALL 82FC
810F:CD7A81	CALL 817A
8112:CDC182	CALL 82C1
8115:3E0D	LD A, 0D
8117:D7		RST 10
8118:CD0282	CALL 8202
811B:012286	LD BC, 8622
811E:CDFC82	CALL 82FC
8121:CD7A81	CALL 817A
8124:CDC182	CALL 82C1
8127:3E0D	LD A, 0D
8129:D7		RST 10
812A:D5		PUSH DE
812B:EB		EX DE, HL
812C:2A655C	LD HL, (5C65)
812F:CD2282	CALL 8222
8132:EB		EX DE, HL
8133:D1		POP DE
8134:015A86	LD BC, 865A
8137:CDFC82	CALL 82FC
813A:D5		PUSH DE
813B:EB		EX DE, HL
813C:2A635C	LD HL, (5C63)
813F:CD2282	CALL 8222
8142:EB		EX DE, HL
8143:D1		POP DE
8144:012B86	LD BC, 862B
8147:CDFC82	CALL 82FC
814A:012286	LD BC, 8622
814D:CDFC82	CALL 82FC
8150:CD7A81	CALL 817A
8153:CDC182	CALL 82C1
8156:3E0D	LD A, 0D
8158:D7		RST 10
8159:011486	LD BC, 8614
815C:CDFC82	CALL 82FC
815F:D5		PUSH DE
8160:EB		EX DE, HL
8161:2A7381	LD HL, (8173)
8164:B7		OR A
8165:ED72	SBC HL, SP
8167:CB3C	SRL H
8169:CB1D	RR L
816B:2B		DEC HL
816C:CDC182	CALL 82C1
816F:3E0D	LD A, 0D
8171:D7		RST 10
8172:		label Stop
8172:310000	LD SP, 0000
8175:215827	LD HL, 2758
8178:D9		EXX
8179:C9		RET
817A:		label _ZDEPTH
817A:EB		EX DE, HL
817B:E3		EX(SP), HL
817C:E5		PUSH HL
817D:2A655C	LD HL, (5C65)
8180:ED4B635C	LD BC, (5C63)
8184:AF		XOR A
8185:ED42	SBC HL, BC
		IF(true)
8187:3009	JR NC, 8192
8189:95		SUB L
818A:6F		LD L, A
818B:9C		SBC A, H
818C:95		SUB L
818D:67		LD H, A
818E:3E2D	LD A, 2D
8190:D7		RST 10
8191:AF		XOR A
8192:		label _ZDEPTH_D5
		ENDIF
8192:010510	LD BC, 1005
8195:29		ADD HL, HL
8196:8F		ADC A, A
8197:B9		CP C
8198:3802	JR C, 819C
819A:91		SUB C
819B:2C		INC L
819C:10F7	DJNZ 8195
819E:C9		RET
819F:		label _ZFETCH
819F:D5		PUSH DE
81A0:ED5B655C	LD DE, (5C65)
81A4:CDC033	CALL 33C0
81A7:ED53655C	LD(5C65), DE
81AB:E1		POP HL
81AC:C1		POP BC
81AD:D1		POP DE
81AE:C5		PUSH BC
81AF:C9		RET
81B0:		label _S_TO_Z
81B0:44		LD B, H
81B1:4D		LD C, L
81B2:E1		POP HL
81B3:E3		EX(SP), HL
81B4:EB		EX DE, HL
81B5:		label _SIGN_BC_TO_Z
81B5:78		LD A, B
81B6:87		ADD A, A
		IF(true)
81B7:		label _CF_BC_TO_Z
81B7:9F		SBC A, A
81B8:E5		PUSH HL
81B9:D5		PUSH DE
81BA:5F		LD E, A
81BB:51		LD D, C
81BC:48		LD C, B
81BD:AF		XOR A
81BE:47		LD B, A
81BF:CDBB2A	CALL 2ABB
81C2:D1		POP DE
		ELSE(false)
- _CF_BC_TO_Z:           ;[22:138]    _cf_bc>z
-     sbc   A, A          ; 1:4       _cf_bc>z   0x00 or 0xff
-     push HL             ; 1:11      _cf_bc>z
-     ld   HL,(0x5C65)    ; 3:16      _cf_bc>z   load STKEND
-     ld  (HL),0x00       ; 2:10      _cf_bc>z
-     inc  HL             ; 1:6       _cf_bc>z
-     ld  (HL), A         ; 1:7       _cf_bc>z
-     inc  HL             ; 1:6       _cf_bc>z
-     ld  (HL), C         ; 1:7       _cf_bc>z
-     inc  HL             ; 1:6       _cf_bc>z
-     ld  (HL), B         ; 1:7       _cf_bc>z
-     inc  HL             ; 1:6       _cf_bc>z
-     ld  (HL),0x00       ; 2:10      _cf_bc>z
-     inc  HL             ; 1:6       _cf_bc>z
-     ld  (0x5C65),HL     ; 3:16      _cf_bc>z   save STKEND+5
		ENDIF
81C3:E1		POP HL
81C4:C9		RET
81C5:		label _D_TO_Z
81C5:7A		LD A, D
81C6:B3		OR E
81C7:B4		OR H
81C8:B5		OR L
81C9:281A	JR Z, 81E5
81CB:3E7F	LD A, 7F
81CD:B2		OR D
81CE:F5		PUSH AF
81CF:FCED82	CALL M, 82ED
81D2:06A0	LD B, A0
81D4:FAE081	JP M, 81E0
81D7:05		DEC B
81D8:29		ADD HL, HL
81D9:CB13	RL E
81DB:CB12	RL D
81DD:F2D781	JP P, 81D7
81E0:F1		POP AF
81E1:A2		AND D
81E2:53		LD D, E
81E3:5F		LD E, A
81E4:78		LD A, B
81E5:		label _ZERO_TO_Z
81E5:45		LD B, L
81E6:4C		LD C, H
81E7:CDBB2A	CALL 2ABB
81EA:C1		POP BC
81EB:E1		POP HL
81EC:D1		POP DE
81ED:C5		PUSH BC
81EE:C9		RET
81EF:		label _ZDOT
81EF:D5		PUSH DE
81F0:E5		PUSH HL
81F1:CDBF35	CALL 35BF
81F4:E5		PUSH HL
81F5:CDE32D	CALL 2DE3
81F8:E1		POP HL
81F9:22655C	LD(5C65), HL
81FC:3E20	LD A, 20
81FE:D7		RST 10
81FF:E1		POP HL
8200:D1		POP DE
8201:C9		RET
8202:		label _ZDROP
8202:D5		PUSH DE
8203:E5		PUSH HL
8204:EF		RST 28
8205:02		DEFB of 1 bytes
8206:38		DEFB of 1 bytes
8207:E1		POP HL
8208:D1		POP DE
8209:C9		RET
820A:		label _ZSUB
820A:D5		PUSH DE
820B:E5		PUSH HL
820C:EF		RST 28
820D:03		DEFB of 1 bytes
820E:38		DEFB of 1 bytes
820F:E1		POP HL
8210:D1		POP DE
8211:C9		RET
8212:		label _ZMUL
8212:D5		PUSH DE
8213:E5		PUSH HL
		IF(true)
8214:EF		RST 28
8215:04		DEFB of 1 bytes
8216:38		DEFB of 1 bytes
		ELSE(false)
-     call 0x35bf         ; 3:17      _z*   call ZX ROM stk-pntrs, DE= stkend, HL = DE-5
-     ld  (0x5C65),HL     ; 3:16      _z*   save STKEND
-     call 0x35c2         ; 3:17      _z*   call ZX ROM            DE= HL    , HL = HL-5
-     call 0x30ca         ; 3:17      _z*   call ZX ROM fmul, adr_HL = adr_DE * adr_HL
		ENDIF
8217:E1		POP HL
8218:D1		POP DE
8219:C9		RET
821A:		label _ZDUP
821A:D5		PUSH DE
821B:E5		PUSH HL
821C:EF		RST 28
821D:31		DEFB of 1 bytes
821E:38		DEFB of 1 bytes
821F:E1		POP HL
8220:D1		POP DE
8221:C9		RET
8222:		label PRT_HEX_U16
8222:7C		LD A, H
8223:CD2782	CALL 8227
8226:7D		LD A, L
8227:		label PRT_HEX_A
8227:F5		PUSH AF
8228:1F		RRA
8229:1F		RRA
822A:1F		RRA
822B:1F		RRA
822C:CD3082	CALL 8230
822F:F1		POP AF
8230:		label PRT_HEX_NIBBLE
8230:F6F0	OR F0
8232:27		DAA
8233:C6A0	ADD A, A0
8235:CE40	ADC A, 40
8237:D7		RST 10
8238:C9		RET
8239:		label PRT_S32
8239:7A		LD A, D
823A:87		ADD A, A
823B:3006	JR NC, 8243
823D:3E2D	LD A, 2D
823F:D7		RST 10
8240:CDED82	CALL 82ED
8243:		label PRT_U32
8243:AF		XOR A
8244:DDE5	PUSH IX
8246:EB		EX DE, HL
8247:DD6B	LD IXL, E
8249:DD62	LD IXH, D
824B:110036	LD DE, 3600
824E:0165C4	LD BC, C465
8251:CD9782	CALL 8297
8254:161F	LD D, 1F
8256:010AFA	LD BC, FA0A
8259:CD9782	CALL 8297
825C:118069	LD DE, 6980
825F:0167FF	LD BC, FF67
8262:CD9782	CALL 8297
8265:11C0BD	LD DE, BDC0
8268:0EF0	LD C, F0
826A:CD9782	CALL 8297
826D:116079	LD DE, 7960
8270:0EFE	LD C, FE
8272:CD9782	CALL 8297
8275:11F0D8	LD DE, D8F0
8278:48		LD C, B
8279:CD9782	CALL 8297
827C:1118FC	LD DE, FC18
827F:CD9782	CALL 8297
8282:119CFF	LD DE, FF9C
8285:CD9782	CALL 8297
8288:1EF6	LD E, F6
828A:CD9782	CALL 8297
828D:DD7D	LD A, IXL
828F:DDE1	POP IX
8291:C1		POP BC
8292:E1		POP HL
8293:D1		POP DE
8294:C5		PUSH BC
8295:1817	JR 82AE
8297:		label BIN32_DEC
8297:DD19	ADD IX, DE
8299:ED4A	ADC HL, BC
829B:3C		INC A
829C:38F9	JR C, 8297
829E:08		EX AF, AF'
829F:DD7D	LD A, IXL
82A1:93		SUB E
82A2:DD6F	LD IXL, A
82A4:DD7C	LD A, IXH
82A6:9A		SBC A, D
82A7:DD67	LD IXH, A
82A9:ED42	SBC HL, BC
82AB:08		EX AF, AF'
82AC:3D		DEC A
82AD:C8		RET Z
82AE:		label BIN32_DEC_CHAR
82AE:F630	OR 30
82B0:D7		RST 10
82B1:3E30	LD A, 30
82B3:C9		RET
82B4:		label PRT_S16
82B4:7C		LD A, H
82B5:87		ADD A, A
82B6:3009	JR NC, 82C1
82B8:3E2D	LD A, 2D
82BA:D7		RST 10
82BB:AF		XOR A
82BC:95		SUB L
82BD:6F		LD L, A
82BE:9C		SBC A, H
82BF:95		SUB L
82C0:67		LD H, A
82C1:		label PRT_U16
82C1:AF		XOR A
82C2:01F0D8	LD BC, D8F0
82C5:CDE082	CALL 82E0
82C8:0118FC	LD BC, FC18
82CB:CDE082	CALL 82E0
82CE:019CFF	LD BC, FF9C
82D1:CDE082	CALL 82E0
82D4:0EF6	LD C, F6
82D6:CDE082	CALL 82E0
82D9:7D		LD A, L
82DA:E1		POP HL
82DB:E3		EX(SP), HL
82DC:EB		EX DE, HL
82DD:1808	JR 82E7
82DF:3C		INC A
82E0:		label BIN16_DEC
82E0:09		ADD HL, BC
82E1:38FC	JR C, 82DF
82E3:ED42	SBC HL, BC
82E5:B7		OR A
82E6:C8		RET Z
82E7:		label BIN16_DEC_CHAR
82E7:F630	OR 30
82E9:D7		RST 10
82EA:3E30	LD A, 30
82EC:C9		RET
82ED:		label NEGATE_32
82ED:AF		XOR A
82EE:4F		LD C, A
82EF:95		SUB L
82F0:6F		LD L, A
82F1:79		LD A, C
82F2:9C		SBC A, H
82F3:67		LD H, A
82F4:79		LD A, C
82F5:9B		SBC A, E
82F6:5F		LD E, A
82F7:79		LD A, C
82F8:9A		SBC A, D
82F9:57		LD D, A
82FA:C9		RET
82FB:D7		RST 10
82FC:		label PRINT_STRING_Z
82FC:0A		LD A, (BC)
82FD:03		INC BC
82FE:B7		OR A
82FF:C2FB82	JP NZ, 82FB
8302:C9		RET
MAX_X		EQU 0033
MAX_Y		EQU 0018
CURCHL		EQU 5C51
PRINT_OUT	EQU 5CBB
8303:		label set_ink
8303:212484	LD HL, 8424
8306:AE		XOR (HL)
8307:E607	AND 07
8309:AE		XOR (HL)
830A:1833	JR 833F
830C:		label set_paper
830C:212484	LD HL, 8424
830F:87		ADD A, A
8310:87		ADD A, A
8311:87		ADD A, A
8312:AE		XOR (HL)
8313:E638	AND 38
8315:AE		XOR (HL)
8316:1827	JR 833F
8318:		label set_flash
8318:1F		RRA
8319:212484	LD HL, 8424
831C:7E		LD A, (HL)
831D:8F		ADC A, A
831E:0F		RRCA
831F:181E	JR 833F
8321:		label set_bright
8321:212484	LD HL, 8424
8324:0F		RRCA
8325:0F		RRCA
8326:AE		XOR (HL)
8327:E640	AND 40
8329:AE		XOR (HL)
832A:1813	JR 833F
832C:		label set_inverse
832C:212484	LD HL, 8424
832F:7E		LD A, (HL)
8330:E638	AND 38
8332:87		ADD A, A
8333:87		ADD A, A
8334:AE		XOR (HL)
8335:E6F8	AND F8
8337:AE		XOR (HL)
8338:07		RLCA
8339:07		RLCA
833A:07		RLCA
833B:AE		XOR (HL)
833C:E63F	AND 3F
833E:AE		XOR (HL)
833F:		label set_attr
833F:77		LD (HL), A
8340:		label clean_set_0
8340:AF		XOR A
8341:		label clean_set_A
8341:32A383	LD(83A3), A
8344:E1		POP HL
8345:C9		RET
8346:		label set_over
8346:18F8	JR 8340
8348:		label set_at
8348:320D84	LD(840D), A
834B:ED44	NEG
834D:C618	ADD A, 18
834F:32895C	LD(5C89), A
8352:3EB2	LD A, B2
8354:18EB	JR 8341
8356:		label set_at_x
8356:320C84	LD(840C), A
8359:18E5	JR 8340
		IF(false)
-     jr   print_comma    ; 2:12      putchar   0x06
-     jr   print_edit     ; 2:12      putchar   0x07
-     jr   cursor_left    ; 2:12      putchar   0x08
-     jr   cursor_right   ; 2:12      putchar   0x09
-     jr   cursor_down    ; 2:12      putchar   0x0A
-     jr   cursor_up      ; 2:12      putchar   0x0B
-     jr   delete         ; 2:12      putchar   0x0C
-     jr   enter          ; 2:12      putchar   0x0D
-     jr   not_used       ; 2:12      putchar   0x0E
-     jr   not_used       ; 2:12      putchar   0x0F    
		ENDIF
835B:		label tab_spec
835B:18A6	JR 8303
835D:18AD	JR 830C
835F:18B7	JR 8318
8361:18BE	JR 8321
8363:18C7	JR 832C
8365:18DF	JR 8346
8367:18DF	JR 8348
8369:		label set_tab
8369:2A0C84	LD HL, (840C)
836C:D633	SUB 33
836E:30FC	JR NC, 836C
8370:C633	ADD A, 33
8372:BD		CP L
8373:DC7884	CALL C, 8478
8376:		label set_tab_A
8376:6F		LD L, A
8377:220C84	LD(840C), HL
837A:18C4	JR 8340
837C:		label cursor_left
837C:2A0C84	LD HL, (840C)
837F:2C		INC L
8380:2D		DEC L
8381:2B		DEC HL
8382:2002	JR NZ, 8386
8384:2E32	LD L, 32
8386:1810	JR 8398
8388:		label print_comma
8388:2A0C84	LD HL, (840C)
838B:3E11	LD A, 11
838D:BD		CP L
838E:30E6	JR NC, 8376
8390:87		ADD A, A
8391:BD		CP L
8392:30E2	JR NC, 8376
8394:AF		XOR A
8395:		label enter
8395:CC7884	CALL Z, 8478
8398:		label enter_exit
8398:220C84	LD(840C), HL
839B:E1		POP HL
839C:C9		RET
839D:		label print_edit
839D:		label cursor_right
839D:		label cursor_down
839D:		label cursor_up
839D:		label delete
839D:		label not_used
839D:		label print_question
839D:3E3F	LD A, 3F
839F:185C	JR 83FD
83A1:		label putchar
83A1:E5		PUSH HL
self_jmp	EQU 83A3
83A2:1800	JR 83A4
83A4:		label jump_from
83A4:FEA5	CP A5
83A6:3025	JR NC, 83CD
83A8:FE20	CP 20
83AA:3051	JR NC, 83FD
83AC:FE06	CP 06
83AE:28D8	JR Z, 8388
83B0:FE08	CP 08
83B2:28C8	JR Z, 837C
83B4:FE09	CP 09
83B6:CA6984	JP Z, 8469
83B9:FE0D	CP 0D
83BB:28D8	JR Z, 8395
83BD:D610	SUB 10
83BF:38DC	JR C, 839D
83C1:FE08	CP 08
83C3:30D8	JR NC, 839D
83C5:		label draw_spec
83C5:87		ADD A, A
83C6:D649	SUB 49
83C8:32A383	LD(83A3), A
83CB:		label draw_spec_exit
83CB:E1		POP HL
83CC:C9		RET
83CD:		label print_token
83CD:EB		EX DE, HL
83CE:119500	LD DE, 0095
83D1:D6A5	SUB A5
83D3:F5		PUSH AF
83D4:CD410C	CALL 0C41
83D7:EB		EX DE, HL
83D8:3E20	LD A, 20
83DA:FDCB0146	BIT 0, (IY+01)
83DE:CCFC83	CALL Z, 83FC
83E1:		label token_loop
83E1:7E		LD A, (HL)
83E2:E67F	AND 7F
83E4:CDFC83	CALL 83FC
83E7:7E		LD A, (HL)
83E8:23		INC HL
83E9:87		ADD A, A
83EA:30F5	JR NC, 83E1
83EC:E1		POP HL
83ED:FE48	CP 48
83EF:2804	JR Z, 83F5
83F1:FE82	CP 82
83F3:38D6	JR C, 83CB
83F5:7C		LD A, H
83F6:FE03	CP 03
83F8:3E20	LD A, 20
83FA:D8		RET C
83FB:E1		POP HL
83FC:		label print_char
83FC:E5		PUSH HL
83FD:		label print_char_HL
83FD:D9		EXX
83FE:D5		PUSH DE
83FF:C5		PUSH BC
8400:E5		PUSH HL
8401:011484	LD BC, 8414
8404:87		ADD A, A
8405:6F		LD L, A
8406:2600	LD H, 00
8408:29		ADD HL, HL
8409:09		ADD HL, BC
840A:D9		EXX
putchar_yx	EQU 840C
putchar_y	EQU 840D
840B:110000	LD DE, 0000
840E:7B		LD A, E
840F:87		ADD A, A
8410:87		ADD A, A
8411:83		ADD A, E
8412:47		LD B, A
8413:AA		XOR D
8414:E6F8	AND F8
8416:AA		XOR D
8417:0F		RRCA
8418:0F		RRCA
8419:0F		RRCA
841A:6F		LD L, A
841B:7A		LD A, D
841C:F6C7	OR C7
841E:1F		RRA
841F:0F		RRCA
8420:3F		CCF
8421:1F		RRA
8422:67		LD H, A
self_attr	EQU 8424
8423:3638	LD (HL), 38
8425:7A		LD A, D
8426:E618	AND 18
8428:F640	OR 40
842A:67		LD H, A
842B:78		LD A, B
842C:E607	AND 07
842E:2F		CPL
842F:C609	ADD A, 09
8431:47		LD B, A
8432:D9		EXX
8433:4F		LD C, A
8434:D9		EXX
8435:EB		EX DE, HL
8436:21F000	LD HL, 00F0
8439:29		ADD HL, HL
843A:10FD	DJNZ 8439
843C:EB		EX DE, HL
843D:0E04	LD C, 04
843F:		label putchar_c
843F:D9		EXX
8440:7E		LD A, (HL)
8441:23		INC HL
8442:41		LD B, C
8443:07		RLCA
8444:10FD	DJNZ 8443
8446:47		LD B, A
8447:D9		EXX
8448:0602	LD B, 02
844A:		label putchar_b
844A:AE		XOR (HL)
844B:A2		AND D
844C:AE		XOR (HL)
844D:77		LD (HL), A
844E:D9		EXX
844F:78		LD A, B
8450:D9		EXX
8451:2C		INC L
8452:AE		XOR (HL)
8453:A3		AND E
8454:AE		XOR (HL)
8455:77		LD (HL), A
8456:2D		DEC L
8457:24		INC H
8458:D9		EXX
8459:78		LD A, B
845A:07		RLCA
845B:07		RLCA
845C:07		RLCA
845D:07		RLCA
845E:47		LD B, A
845F:D9		EXX
8460:10E8	DJNZ 844A
8462:0D		DEC C
8463:20DA	JR NZ, 843F
8465:E1		POP HL
8466:C1		POP BC
8467:D1		POP DE
8468:D9		EXX
8469:		label next_cursor
8469:2A0C84	LD HL, (840C)
846C:		label next_cursor_HL
846C:2C		INC L
846D:7D		LD A, L
846E:D633	SUB 33
8470:D47884	CALL NC, 8478
8473:		label next_exit
8473:220C84	LD(840C), HL
8476:		label exit_hl
8476:E1		POP HL
8477:C9		RET
8478:		label next_line
8478:F5		PUSH AF
8479:21885C	LD HL, 5C88
847C:3601	LD (HL), 01
847E:3E09	LD A, 09
8480:E5		PUSH HL
8481:CDF409	CALL 09F4
8484:21A183	LD HL, 83A1
8487:22BB5C	LD(5CBB), HL
848A:E1		POP HL
848B:3E18	LD A, 18
848D:2C		INC L
848E:96		SUB (HL)
848F:67		LD H, A
8490:2E00	LD L, 00
8492:F1		POP AF
8493:C9		RET
FONT_ADR	EQU 8414
8494:		label FONT_5x8
8494:00000000	DEFB of 4 bytes
8498:02222020	DEFB of 4 bytes
849C:05500000	DEFB of 4 bytes
84A0:005F5F50	DEFB of 4 bytes
84A4:02763720	DEFB of 4 bytes
84A8:0CD24B30	DEFB of 4 bytes
84AC:00EA5AD0	DEFB of 4 bytes
84B0:03120000	DEFB of 4 bytes
84B4:02444420	DEFB of 4 bytes
84B8:04222240	DEFB of 4 bytes
84BC:000A4A00	DEFB of 4 bytes
84C0:0004E400	DEFB of 4 bytes
84C4:00000224	DEFB of 4 bytes
84C8:0000E000	DEFB of 4 bytes
84CC:00000040	DEFB of 4 bytes
84D0:00124800	DEFB of 4 bytes
84D4:069BD960	DEFB of 4 bytes
84D8:02622270	DEFB of 4 bytes
84DC:069168F0	DEFB of 4 bytes
84E0:06921960	DEFB of 4 bytes
84E4:026AF220	DEFB of 4 bytes
84E8:0F8E1960	DEFB of 4 bytes
84EC:068E9960	DEFB of 4 bytes
84F0:0F124440	DEFB of 4 bytes
84F4:06969960	DEFB of 4 bytes
84F8:06997160	DEFB of 4 bytes
84FC:00020200	DEFB of 4 bytes
8500:00020240	DEFB of 4 bytes
8504:00124210	DEFB of 4 bytes
8508:00070700	DEFB of 4 bytes
850C:00421240	DEFB of 4 bytes
8510:0E124040	DEFB of 4 bytes
8514:006FB860	DEFB of 4 bytes
8518:0699F990	DEFB of 4 bytes
851C:0E9E99E0	DEFB of 4 bytes
8520:06988960	DEFB of 4 bytes
8524:0E9999E0	DEFB of 4 bytes
8528:0F8E88F0	DEFB of 4 bytes
852C:0F8E8880	DEFB of 4 bytes
8530:0698B970	DEFB of 4 bytes
8534:099F9990	DEFB of 4 bytes
8538:07222270	DEFB of 4 bytes
853C:07111960	DEFB of 4 bytes
8540:09ACA990	DEFB of 4 bytes
8544:088888F0	DEFB of 4 bytes
8548:09F99990	DEFB of 4 bytes
854C:09DB9990	DEFB of 4 bytes
8550:06999960	DEFB of 4 bytes
8554:0E99E880	DEFB of 4 bytes
8558:06999A50	DEFB of 4 bytes
855C:0E99E990	DEFB of 4 bytes
8560:078611E0	DEFB of 4 bytes
8564:0F222220	DEFB of 4 bytes
8568:09999960	DEFB of 4 bytes
856C:09999520	DEFB of 4 bytes
8570:09999F90	DEFB of 4 bytes
8574:09969990	DEFB of 4 bytes
8578:09952220	DEFB of 4 bytes
857C:0F1248F0	DEFB of 4 bytes
8580:07444470	DEFB of 4 bytes
8584:00842100	DEFB of 4 bytes
8588:0E2222E0	DEFB of 4 bytes
858C:02500000	DEFB of 4 bytes
8590:000000F0	DEFB of 4 bytes
8594:034E44F0	DEFB of 4 bytes
8598:00617970	DEFB of 4 bytes
859C:08E999E0	DEFB of 4 bytes
85A0:00698960	DEFB of 4 bytes
85A4:01799970	DEFB of 4 bytes
85A8:0069F870	DEFB of 4 bytes
85AC:34E44440	DEFB of 4 bytes
85B0:00799716	DEFB of 4 bytes
85B4:08E99990	DEFB of 4 bytes
85B8:20622270	DEFB of 4 bytes
85BC:10311196	DEFB of 4 bytes
85C0:089ACA90	DEFB of 4 bytes
85C4:0C4444E0	DEFB of 4 bytes
85C8:00CBBB90	DEFB of 4 bytes
85CC:00AD9990	DEFB of 4 bytes
85D0:00699960	DEFB of 4 bytes
85D4:00E999E8	DEFB of 4 bytes
85D8:00799971	DEFB of 4 bytes
85DC:00AD8880	DEFB of 4 bytes
85E0:007861E0	DEFB of 4 bytes
85E4:04E44430	DEFB of 4 bytes
85E8:00999960	DEFB of 4 bytes
85EC:00999520	DEFB of 4 bytes
85F0:00999F90	DEFB of 4 bytes
85F4:00996990	DEFB of 4 bytes
85F8:00999716	DEFB of 4 bytes
85FC:00F248F0	DEFB of 4 bytes
8600:12242210	DEFB of 4 bytes
8604:44444440	DEFB of 4 bytes
8608:84424480	DEFB of 4 bytes
860C:05A00000	DEFB of 4 bytes
8610:069BB960	DEFB of 4 bytes
8614:		label STRING_SECTION
8614:		label string115
8614:44657074	DEFB of 8 bytes
8618:683A2000
size115		EQU 0008
string114	EQU 8622
size114		EQU 0009
string113	EQU 862B
size113		EQU 002F
string112	EQU 865A
size112		EQU 002E
string111	EQU 8622
size111		EQU 0009
string110	EQU 8622
size110		EQU 0009
string109	EQU 8622
size109		EQU 0009
861C:		label string108
861C:2D0D00	DEFB of 3 bytes
size108		EQU 0003
string107	EQU 8622
size107		EQU 0009
861F:		label string106
861F:2A0D00	DEFB of 3 bytes
size106		EQU 0003
string105	EQU 8622
size105		EQU 0009
string104	EQU 8622
size104		EQU 0009
8622:		label string103
8622:5A446570	DEFB of 9 bytes
8626:74683A20
862A:00
size103		EQU 0009
862B:		label string102
862B:203D2053	DEFB of 47 bytes
862F:544B424F
8633:543A4164
8637:64722E20
863B:6F662062
863F:6F74746F
8643:6D206F66
8647:2063616C
864B:63756C61
864F:746F7220
8653:73746163
8657:6B0D00
size102		EQU 002F
865A:		label string101
865A:203D2053	DEFB of 46 bytes
865E:544B454E
8662:443A4164
8666:64726573
866A:73206F66
866E:20746F70
8672:206F6620
8676:63616C63
867A:756C6174
867E:6F722073
8682:7461636B
8686:0D00
size101		EQU 002E
8688:		label VARIABLE_SECTION
8688:		label zvar1
8688:AE		DEFB of 1 bytes
8689:7F		DEFB of 1 bytes
868A:FDFFFE	DEFB of 3 bytes
Emiting raw binary from 8000 to 868C
